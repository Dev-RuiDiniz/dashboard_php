{% extends "base.html" %}

{% block content %}
<h1 class="h3 mb-4">Administração de termos de consentimento</h1>
{% if error %}<div class="alert alert-danger">{{ error }}</div>{% endif %}

<form method="post" class="card card-body mb-4">
  <div class="row g-3">
    <div class="col-md-3">
      <label class="form-label">Versão</label>
      <input class="form-control" name="version" placeholder="v2" required />
    </div>
    <div class="col-md-9">
      <label class="form-label">Conteúdo do termo</label>
      <textarea class="form-control" name="content" rows="4" required></textarea>
    </div>
  </div>
  <div class="form-check mt-3">
    <input class="form-check-input" type="checkbox" name="active" id="active" checked />
    <label class="form-check-label" for="active">Definir como termo ativo</label>
  </div>
  <div class="form-actions mt-4">
    <button class="btn btn-primary">Salvar termo</button>
  </div>
</form>

<div class="card card-body">
  <h2 class="h5">Histórico de termos</h2>
  <table class="table table-sm table-striped align-middle">
    <thead><tr><th>Versão</th><th>Ativo</th><th>Criado em</th><th>Conteúdo</th></tr></thead>
    <tbody>
      {% for term in terms %}
      <tr>
        <td>{{ term.version }}</td>
        <td>{% if term.active %}<span class="badge text-bg-success">Ativo</span>{% else %}<span class="badge text-bg-secondary">Inativo</span>{% endif %}</td>
        <td>{{ term.created_at }}</td>
        <td><details><summary>Ver</summary><pre class="small">{{ term.content }}</pre></details></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
